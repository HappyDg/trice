;------------------------------------------------------------
;
; Copyright (c) 2013-2015 Altium Limited
;
; This software is the proprietary, copyrighted property of
; Altium Ltd. All Right Reserved.
;
; SVN revision information:
; $Rev: 15051 $:
; $Date: 2015-05-01 12:06:39 +0200 (Fri, 01 May 2015) $:
;
;------------------------------------------------------------

[Plugin]
Name=stm32l1xx_cmsis
Implement=stm32_cmsis_variant
Caption=STM32L1XX CMSIS Core
Description=CMSIS Core configuration for STM32L1XX devices

; includes
GlobalCompileOption0=-I"$(SWP_ABSPATH)\CM3\CoreSupport"
GlobalCompileOption1=-I"$(SWP_ABSPATH)\CM3\DeviceSupport\ST\STM32L1xx"
GlobalCompileOption2=-I"$(SWP_ABSPATH)\include"
CompileOption0=-Wc--no-warnings=529,560,588

; sources
SourceFile0=$(SWP_RELPATH)\CM3\DeviceSupport\ST\STM32L1xx\system_stm32l1xx.c

[Available_If0]
Kind=ENVIRONMENT
Object=DEVICE
Condition=REQ
Value=STM32L1.

[Option0]
Name=target
Kind=Boolean
DefaultValue=True
GenerateCompileDefine=STM32L1XX

[Option0_Hide_If0]
Kind=True

[Option1]
Name=clksrc
Caption=Clock Source
Description=Select the clock source for the system core/processor clock.
Kind=ENUM
DefaultValue=PLLHSE
ENUM0=HSI
ENUM1=HSE
ENUM2=PLLHSI
ENUM3=PLLHSE
ENUM4=MSI
EnumGUI0=HSI
EnumGUI1=HSE
EnumGUI2=PLL - HSI
EnumGUI3=PLL - HSE
EnumGUI4=MSI
EnumDescription0=High Speed 16MHz Internal Oscillator (+/- 1%)
EnumDescription1=High Speed External Oscillator generated by 1-24MHz Crystal or 1-32MHz External Source
EnumDescription2=PLL Clocked by High Speed Internal Oscillator (+/- 1%)
EnumDescription3=PLL Clocked by High Speed External Oscillator
EnumDescription4=Multispeed Internal Oscillator (+/- 1%)

[Option1_AutoSet0]
Option=sysclk
AutoValueEnum0=16000000
AutoValueEnum1=xfreq
AutoValueEnum2=16000000*pllmul/plldiv
AutoValueEnum3=xfreq*pllmul/plldiv
AutoValueEnum4=65536*(2^msirange)

[Option1_AutoSet1]
Option=usbclk
AutoValueEnum0=0
AutoValueEnum1=0
AutoValueEnum2=16000000*pllmul/2
AutoValueEnum3=xfreq*pllmul/2
AutoValueEnum4=0

[Option2]
Name=rtclcd
Caption=RTC/LCD Clock Source
Description=Select the clock source for RTC and LCD.
Kind=ENUM
DefaultValue=LSI
ENUM0=NONE
ENUM1=LSE
ENUM2=LSI
ENUM3=HSE
EnumDescription0=No RTC/LCD Clock
EnumDescription1=Low Speed 32.768kHz External Oscilator
EnumDescription2=Low Speed 37kHz Internal Oscillator
EnumDescription3=High Speed External Oscilator, must not exceed 16MHz


[Option3]
Name=xsource
Caption=External Source
Kind=ENUM
DefaultValue=XTAL
Enum0=XTAL
Enum1=OSC
EnumDescription0=Crystal
EnumDescription1=External Oscillator

[Option3_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=HSE
OrCondition=True

[Option3_Available_If1]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSE
OrCondition=True

[Option3_Available_If2]
Kind=OPTION
Object=rtclcd
Condition=EQ
Value=HSE
OrCondition=True

[Option3_Hide_If0]
Kind=INTERFACE
Object=stm32_pinmapper
Condition=EQ

[Option4]
Name=xfreq
Kind=UINT32
Caption=External Freq. (Hz)
Description=External Crystal/Oscillator frequency at the High Speed External oscillator (HSE) input. 2-24MHz for crystal, 2-32MHz for external oscillator
DefaultValue=8000000
MinRange=2000000
MaxRange=32000000

[Option4_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=HSE
OrCondition=True

[Option4_Available_If1]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSE
OrCondition=True

[Option4_Available_If2]
Kind=OPTION
Object=rtclcd
Condition=EQ
Value=HSE
OrCondition=True



[Option5]
Name=pllmul
Caption=PLL Multiplier
Description=PLL Multiplier. Sets System Clock (SYSCLK).
Kind=ENUM
DefaultValue=12
Enum0=3
Enum1=4
Enum2=6
Enum3=8
Enum4=12
Enum5=16
Enum6=24
Enum7=32
Enum8=48
EnumValue0=3
EnumValue1=4
EnumValue2=6
EnumValue3=8
EnumValue4=12
EnumValue5=16
EnumValue6=24
EnumValue7=32
EnumValue8=48

[Option5_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSI
OrCondition=True

[Option5_Available_If1]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSE
OrCondition=True

[Option6]
Name=usbclk
Caption=48MHz Clock (Hz)
Description=The 48MHz clock for the USB peripheral
Kind=UINT32
NoGenerate=True

[Option6_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSI
OrCondition=True

[Option6_Available_If1]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSE
OrCondition=True


[Option7]
Name=plldiv
Kind=ENUM
Caption=PLL Divider
Description=PLL Divider. Sets System Clock (SYSCLK)
DefaultValue=3
Enum0=2
Enum1=3
Enum2=4
EnumValue0=2
EnumValue1=3
EnumValue2=4

[Option7_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSI
OrCondition=True

[Option7_Available_If1]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=PLLHSE
OrCondition=True



[Option8]
Name=msirange
Caption=MSI Range
Kind=UINT8
Description=MSI Range. Each next range doubles the frequency. Range 0 = 65.536kHz, Range 6 = 4.192MHz. Freq accuracy within 1%.
DefaultValue=5
MinRange=0
MaxRange=6

[Option8_Available_If0]
Kind=OPTION
Object=clksrc
Condition=EQ
Value=MSI



[Option9]
Name=sysclk
Caption=SYSCLK(Hz)
Kind=UINT32
NoGenerate=True
Description=System Clock, 32MHz max. Equals PLL Input Freq * PLL Multiplier / PLL Divider.
;MaxRange=32000000

[Option9_AutoSet0]
Option=hclk
AutoValue=sysclk/ahb



[Option10]
Name=ahb
Caption=AHB Prescaler
Description=The actual CPU clock (HCLK) will equal SYSCLK divided by the AHB prescaler.
Kind=ENUM
DefaultValue=1
Enum0=1
Enum1=2
Enum2=4
Enum3=8
Enum4=16
Enum5=64
Enum6=128
Enum7=256
Enum8=512
EnumValue0=1
EnumValue1=2
EnumValue2=4
EnumValue3=8
EnumValue4=16
EnumValue5=64
EnumValue6=128
EnumValue7=256
EnumValue8=512



[Option11]
Name=hclk
Caption=HCLK (Hz)
Kind=UINT32
Description=CPU Clock. Do not exceed 32MHz.
MaxRange=32000000

[Option11_AutoSet0]
Option=apb1clk
AutoValue=hclk/apb1

[Option11_AutoSet1]
Option=apb2clk
AutoValue=hclk/apb2

[Option11_AutoSet2]
Option=clockhz
Interface=timing

[Option11_AutoSet3]
Option=clockhz
Interface=pal

[Option12]
Name=apb1
Caption=APB1 Prescaler
Description=The APB1 clock will equal the CPU clock (HCLK) divided the the APB1 Prescaler
Kind=ENUM
DefaultValue=1
Enum0=1
Enum1=2
Enum2=4
Enum3=8
Enum4=16
EnumValue0=1
EnumValue1=2
EnumValue2=4
EnumValue3=8
EnumValue4=16



[Option13]
Name=apb1clk
Caption=APB1 Clock(Hz)
Description=The APB1 clocks peripherals with a baseadress in the range 0x40000000 - 0x4000FFFF (see table 1 in the Reference manual). Do not exceed 32MHz.
Kind=UINT32
NoGenerate=True
;MaxRange=32000000



[Option14]
Name=apb2
Caption=APB2 Prescaler
Description=The APB2 clock will equal the CPU clock (HCLK) divided by the APB2 Prescaler
Kind=ENUM
DefaultValue=1
Enum0=1
Enum1=2
Enum2=4
Enum3=8
Enum4=16
EnumValue0=1
EnumValue1=2
EnumValue2=4
EnumValue3=8
EnumValue4=16



[Option15]
Name=apb2clk
Caption=APB2 Clock(Hz)
Description=The APB2 clocks peripherals with a baseadress in the range 0x40010000 - 0x4001FFFF (see table 1 in the Reference manual). Do not exceed 32MHz.
Kind=UINT32
NoGenerate=True
;MaxRange=32000000


[Option16]
Name=mcosel
Caption=MCO Clock Source
Description=Select the clock source for the MCO clock output.
Kind=ENUM
DefaultValue=None
Enum0=None
Enum1=SYSCLK
Enum2=HSI
Enum3=MSI
Enum4=HSE
Enum5=PLL
Enum6=LSI
Enum7=LSE
EnumValue0=0
EnumValue1=1
EnumValue2=2
EnumValue3=3
EnumValue4=4
EnumValue5=5
EnumValue6=6
EnumValue7=7


[Option17]
Name=mcopre
Caption=MCO2 Prescaler
Description=The MCO clock will equal the MCO input divided by this value.
Kind=ENUM
DefaultValue=1
Enum0=1
Enum1=2
Enum2=4
Enum3=8
Enum4=16
EnumValue0=0
EnumValue1=1
EnumValue2=2
EnumValue3=3
EnumValue4=4

[Option17_Hide_If0]
Kind=OPTION
Object=mcosel
Condition=EQ
Value=None


